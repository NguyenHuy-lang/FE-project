<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"></script>
    <meta charset="UTF-8"/>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <link href="/css/product_add.css" rel="stylesheet"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#btnadd").click(function (event) {
                var wsUrl = "http://127.0.0.1:8080/api/v1/admin/products";
                var restrequest = '{"id": null' + ','
                    + '"name":' + $("#name").val() + ','
                    + '"description":'+ $("#description").val() + ','
                    + '"imgPath": "https://firebasestorage.googleapis.com/v0/b/hdvnhom8.appspot.com/o/toan1.png?alt=media&token=2d688e02-aa76-4825-a69e-10ee3213a9fb"' + ','
                    + '"price": 110000' + ','
                    + '"cate": {"id":'+'3'+'}' + ','
                    + '"listComment": []' + ','
                    + '"rating": 4}';
                alert(soapRequest);
                $.ajax({
                    type: "POST",
                    url: wsUrl,
                    contentType: "application/json",
                    dataType: "json",
                    data: soapRequest,
                    success: processSuccess,
                    error: processError
                });

            });
        });

        function processSuccess(data, status, req) {
            alert('success');
            // const xmlResponse = req.responseXML;
            // console.log(xmlResponse);
            // const statusElement = xmlResponse.getElementsByTagName('ns2:getOrderResponse')[0];
            // const statusValue = statusElement.textContent;
            // console.log(statusValue);
            // alert(statusValue);
        }

        function processError(data, status, req) {
            alert('error ' + data.state);
            //alert(req.responseText + " " + status);
        }
    </script>
    
</head>
<body>
    <script type="text/javascript">
        const selectElement = document.querySelector('select');
        fetch('http://localhost:8080/api/v1/categories')
        .then(response => response.json())
        .then(data => {
            data.forEach(category => {
                const option = document.createElement('option');
                option.text = category.name;
                option.value = category.id;
                selectElement.add(option).addEventListener('change',event => {
                    const selectedCategory = event.target.value;
                    console.log('Selected category:', selectedCategory);
                    // Add your desired functionality here
                });
            });
        })
        .catch(error => console.error('Error fetching categories:', error));
    </script>
    <div class="Home">
        <form class="Main">
            <div class="Main-title">
                <div class="Title">THÔNG TIN SẢN PHẨM</div>
            </div>
            <div class="Main-infor">
                <div class="Infor">
                    <input class="Infor_text" id="name" placeholder="Tên mặt hàng" type="text" required/>
                </div>
                <div class="null"></div>
                <div class="Infor">
                    <input class="Infor_text" id="description" placeholder="Mô tả" type="text" required/>
                </div>
                <div class="null"></div>
                <div class="Infor">
                    <input id="file-input" type="file">
                    <button id="upload-button" type="button">Upload File</button>
                </div>
                <div class="null"></div>
                <div class="Infor">
                    <input class="Infor_text" id="price" placeholder="Giá" type="text" required/>
                </div>
                <div class="null"></div>
                <div>
                    <label for="category">Choose a category:</label>
                    <select id="option"></select>
                </div>
                <div class="null"></div>
            </div>
            <div class="Button_save">
                <button class="Save" id="btnadd">
                    <a class="save" href="/admin/product_list.html">SAVE</a>
                </button>
            </div>
        </form>
    </div>
</body>
</html>
